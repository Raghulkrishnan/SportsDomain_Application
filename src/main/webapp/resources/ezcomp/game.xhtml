<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://xmlns.jcp.org/jsf/composite"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <!-- INTERFACE -->
    <cc:interface>
        <cc:attribute name="game" required="true" type="edu.iit.sat.itmd4515.rbalasubramanian1.model.Game" />
        <cc:attribute name="readonly" required="false" default="true" type="java.lang.Boolean" />
        <cc:attribute name="action" required="false" method-signature="java.lang.String.action()" /> 
        <cc:attribute name="intent" required="false" type="java.lang.String" />
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        
        <h:dataTable class="table table-hover table-striped"
                     value="#{cc.attrs.game}" var="v_games">
            <h:column>
                <h:outputText value="#{cc.attrs.game.id}"/>
                <f:facet name="header"><h:outputText value="ID"/></f:facet>
            </h:column>
            <h:column>
                <h:outputText value="#{cc.attrs.game.dateOfGame}"/>
                <f:facet name="header"><h:outputText value="Date"/></f:facet>
            </h:column>
            <h:column>
                <h:outputText value="#{cc.attrs.game.teams[0].teamName} vs #{cc.attrs.game.teams[1].teamName}"/>
                <f:facet name="header"><h:outputText value="Between"/></f:facet>
            </h:column>
            <h:column>
                <h:form>
<!--                    <h:panelGroup layout="block" class="form-group">
                        <h:outputLabel for="teamName" value="Team Name:" />
                        <h:inputText 
                            readonly="#{cc.attrs.readonly ? 'true' : 'false'}"
                            class="form-control" 
                            id="teamName" 
                            value="#{teamController.team.teamName}" />
                        <h:message for="teamName" errorClass="text-danger"/>
                    </h:panelGroup>-->

                    <h:panelGroup layout="block" class="form-group">
                        <h:outputLabel for="wonBy" value="Won By: " />
                        <h:selectOneMenu 
                            disabled="#{cc.attrs.readonly ? 'true' : 'false'}"
                            class="form-control" 
                            id="wonBy" 
                            converter="teamConverter"
                            value ="#{cc.attrs.game.wonBy}">
                            <f:selectItems value="#{ownerGameResultController.teamsInGame}"
                                           var="teams"
                                           itemLabel="#{teams.teamName}"
                                           itemValue="#{teams}"/>
                        </h:selectOneMenu>                    
                        <h:message for="wonBy" errorClass="text-danger"/>
                    </h:panelGroup>
                    <h:panelGroup layout="block" class="form-group">
                        <h:outputLabel for="lostBy" value="Lost By: " />
                        <h:selectOneMenu 
                            disabled="#{cc.attrs.readonly ? 'true' : 'false'}"
                            class="form-control" 
                            id="lostBy" 
                            converter="teamConverter"
                            value ="#{cc.attrs.game.lostBy}">
                            <f:selectItems value="#{ownerGameResultController.teamsInGame}"
                                           var="teams"
                                           itemLabel="#{teams.teamName}"
                                           itemValue="#{teams}"/>
                        </h:selectOneMenu>                   
                        <h:message for="lostBy" errorClass="text-danger"/>
                    </h:panelGroup>
                    <ui:fragment rendered="#{not cc.attrs.readonly}">
                        <h:commandButton value="Save" 
                                         class="btn btn-primary" 
                                         action="#{cc.attrs.action}"/>
                    </ui:fragment>

                    <ui:fragment rendered="#{not cc.attrs.intent.equals('deleteGame')}">
                        <h:commandButton value="Delete Game" 
                                         class="btn btn-primary" 
                                         action="#{cc.attrs.action}"/>
                    </ui:fragment>
                </h:form>
            </h:column>
        </h:dataTable>
        
    </cc:implementation>
</html>